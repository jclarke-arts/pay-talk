---
import Layout from "../layouts/Layout.astro";
import MapViewer from "../components/Map";
import { getCollection } from "astro:content";
import "../styles/global.css";

// Fetch all locations
const locations = await getCollection("locations");

// Process the locations to include the body content
const processedLocations = locations.map((location) => ({
  ...location,
  body: location.body,
}));
---

<Layout title="Interactive Location Map with Audio Guides">
  <nav
    class="fixed z-20 bg-white text-p60-orange p-4 m-4 rounded-3xl shadow-md"
  >
    <p>📍 The Pay Talk Project</p>
  </nav>
  <MapViewer client:only="react" locations={processedLocations} />
</Layout>
